(this["webpackJsonpexchange-rate-checker"]=this["webpackJsonpexchange-rate-checker"]||[]).push([[0],{53:function(e,t,a){e.exports=a(61)},61:function(e,t,a){"use strict";a.r(t);var r=a(11),n=a.n(r),c=a(50),s=a.n(c),u=a(43),o=a.n(u),i=a(47),l=a(36),f=a(51),h=a.n(f),b=function(e){var t=e.data,a=e.base,c=e.currency;return Object(r.useEffect)((function(){for(var e=[],r=0;r<7;r++){var n=new Date;n.setMonth(n.getMonth()-r),e.push(n.toLocaleString("default",{month:"long"}))}!function(e,t,a,r){var n=document.getElementById("chart");if(!n)return;new h.a(n.getContext("2d"),{type:"line",data:{labels:r,datasets:[{label:"".concat(a," in ").concat(t),data:e,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]}})}(t,a,c,e)}),[t,a,c]),n.a.createElement("canvas",{id:"chart",className:"chart"})};var p=function(e){var t=e.base,a=e.currency,r=e.rate;return n.a.createElement("div",{className:"title"},n.a.createElement("h2",{className:"title__small"},"1 ",t," equals"),n.a.createElement("h1",{className:"title__big"},r," ",a))},m=function(e){var t=e.rate,a=Object(r.useState)("1"),c=Object(l.a)(a,2),s=c[0],u=c[1],o=Object(r.useState)(""),i=Object(l.a)(o,2),f=i[0],h=i[1];return Object(r.useEffect)((function(){t&&(u("1"),h((1*t).toString()))}),[t]),n.a.createElement("div",{className:"calculator"},n.a.createElement("input",{className:"calculator__base",value:s,onChange:function(e){var a=g(e.currentTarget.value);u(a),h(g((+a*t).toString()))},type:"text"}),n.a.createElement("input",{className:"calculator__currency",value:f,onChange:function(e){var a=g(e.currentTarget.value);h(a),u(g((+a/t).toString()))},type:"text"}))};function g(e){if(!e)return"";if("."===e[e.length-1]||","===e[e.length-1])return e;var t=parseFloat(e).toString();return"NaN"!==t&&"Infinity"!==t||(t=""),-1!==t.indexOf(".")&&t.length-1-t.indexOf(".")>5&&(t=t.slice(0,t.indexOf(".")+6)),t}var d=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)("USD"),u=Object(l.a)(s,2),o=u[0],i=(u[1],Object(r.useState)("RUB")),f=Object(l.a)(i,2),h=f[0],g=(f[1],Object(r.useState)()),d=Object(l.a)(g,2),E=d[0],O=d[1];Object(r.useEffect)((function(){(function(){return v.apply(this,arguments)})().then(c)}),[]),Object(r.useEffect)((function(){(function(e,t){return j.apply(this,arguments)})(o,h).then(O)}),[o,h]);var y,x=o,S=h;return a&&(x=a[o],S=a[h]),E&&(y=E[E.length-1]),n.a.createElement("div",{className:"app"},n.a.createElement(p,{base:x,currency:S,rate:y}),n.a.createElement(m,{rate:y}),n.a.createElement(b,{data:E,base:x,currency:S}))};function v(){return(v=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://openexchangerates.org/api/currencies.json");case 2:return(a=e.sent).ok||console.error("Error loading currencies"),e.next=6,a.json();case 6:return t=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(i.a)(o.a.mark((function e(t,a){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n=E(t,a),e.next=4,Promise.all(n).then((function(e){e.forEach((function(e){return r.push(e.rates[a])}))}));case 4:return e.abrupt("return",r.reverse());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){for(var a=[],r=0;r<7;r++){var n=new Date;n.setMonth(n.getMonth()-r);var c=n.toJSON().slice(0,10),s=new URL("https://openexchangerates.org/api/historical/"+c+".json");s.searchParams.set("app_id","814335798c7149bfb3caad3be6e1acb2"),s.searchParams.set("base",e),s.searchParams.set("symbols",t),a.push(fetch(s.toString()).then((function(e){return e.ok||console.error("Error loading currency data"),e.json()})))}return a}s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(d,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.86597a85.chunk.js.map