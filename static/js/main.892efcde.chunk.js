(this["webpackJsonpexchange-rate-checker"]=this["webpackJsonpexchange-rate-checker"]||[]).push([[0],{53:function(e,t,a){e.exports=a(62)},59:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),c=a(50),u=a.n(c),s=a(43),l=a.n(s),o=a(47),i=a(33),h=(a(59),a(51)),f=a.n(h),m=function(e){var t=e.data,a=e.base,c=e.currency;return Object(n.useEffect)((function(){for(var e=[],n=6;n>=0;n--){var r=new Date;r.setMonth(r.getMonth()-n),e.push(r.toLocaleString("default",{month:"long"}))}!function(e,t,a,n){var r=document.getElementById("chart");if(!r)return;new f.a(r.getContext("2d"),{type:"line",data:{labels:n,datasets:[{label:"".concat(a," in ").concat(t),data:e,backgroundColor:"rgba(0, 0, 0, 0.4)",borderColor:"#4E4E4E",borderWidth:3}]}})}(t,a,c,e)}),[t,a,c]),r.a.createElement("canvas",{id:"chart",className:"chart"})};var b=function(e){var t=e.base,a=e.currency,n=e.rate;return r.a.createElement("div",{className:"title"},r.a.createElement("h2",{className:"title__small"},"1 ",t," equals"),r.a.createElement("h1",{className:"title__big"},n," ",a))},d=function(e){var t=e.rate,a=Object(n.useState)("1"),c=Object(i.a)(a,2),u=c[0],s=c[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),h=o[0],f=o[1];return Object(n.useEffect)((function(){t&&(s("1"),f((1*t).toString()))}),[t]),r.a.createElement("tr",{className:"calculator"},r.a.createElement("td",null,r.a.createElement("input",{className:"calculator__base",value:u,onChange:function(e){var a=p(e.currentTarget.value);s(a),f(p((+a*t).toString()))},type:"text",autoFocus:!0})),r.a.createElement("td",null,r.a.createElement("input",{className:"calculator__currency",value:h,onChange:function(e){var a=p(e.currentTarget.value);f(a),s(p((+a/t).toString()))},type:"text"})))};function p(e){if(!isNaN(+e.slice(0,e.length-1))&&"e"===e[e.length-1])return e;for(;isNaN(+e);)e=e.slice(0,e.length-1);return e}var g=function(e){var t=e.currencies,a=e.base,c=e.currency,u=e.handleBaseChange,s=e.handleCurrencyChange;return Object(n.useEffect)((function(){if(t){var e=document.querySelector(".select__base"),n=document.querySelector(".select__currency");Object.entries(t).sort((function(e,t){return e[1]>t[1]?1:-1})).forEach((function(e){var t=Object(i.a)(e,2),r=t[0],u=t[1],s=document.createElement("option");s.value=r,s.textContent=u.toString();var l=s.cloneNode(!0);a===r&&(s.selected=!0),c===r&&(l.selected=!0),null===n||void 0===n||n.append(l)}));var r=document.createElement("option");r.value=a,r.textContent=t[a],null===e||void 0===e||e.append(r)}}),[t]),r.a.createElement("tr",{className:"select"},r.a.createElement("td",null,r.a.createElement("select",{className:"select__base",onChange:u})),r.a.createElement("td",null,r.a.createElement("select",{className:"select__currency",onChange:s})))},v=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)("USD"),s=Object(i.a)(u,2),l=s[0],o=s[1],h=Object(n.useState)("RUB"),f=Object(i.a)(h,2),p=f[0],v=f[1],y=Object(n.useState)(),O=Object(i.a)(y,2),N=O[0],S=O[1];Object(n.useEffect)((function(){(function(){return E.apply(this,arguments)})().then(c)}),[]),Object(n.useEffect)((function(){(function(e,t){return j.apply(this,arguments)})(l,p).then(S)}),[l,p]);var _,x=l,C=p;return a&&(x=a[l],C=a[p]),N&&(_=N[N.length-1]),r.a.createElement("div",{className:"app"},r.a.createElement(b,{base:x,currency:C,rate:_}),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement(d,{rate:_}),r.a.createElement(g,{currencies:a,base:l,currency:p,handleBaseChange:function(e){e.currentTarget.value===p&&v(l),o(e.currentTarget.value)},handleCurrencyChange:function(e){e.currentTarget.value===l&&o(p),v(e.currentTarget.value)}}))),r.a.createElement(m,{data:N,base:x,currency:C}))};function E(){return(E=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://openexchangerates.org/api/currencies.json");case 2:return(a=e.sent).ok||console.error("Error loading currencies"),e.next=6,a.json();case 6:return t=e.sent,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(o.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=y(t,a),e.next=4,Promise.all(r).then((function(e){e.forEach((function(e){return n.push(e.rates[a])}))}));case 4:return e.abrupt("return",n.reverse());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){for(var a=[],n=0;n<7;n++){var r=new Date;r.setMonth(r.getMonth()-n);var c=r.toJSON().slice(0,10),u=new URL("https://openexchangerates.org/api/historical/"+c+".json");u.searchParams.set("app_id","814335798c7149bfb3caad3be6e1acb2"),u.searchParams.set("base",e),u.searchParams.set("symbols",t),a.push(fetch(u.toString()).then((function(e){return e.ok||console.error("Error loading currency data"),e.json()})))}return a}u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.892efcde.chunk.js.map